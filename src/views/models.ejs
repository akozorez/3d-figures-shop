<%- include('parts/header.ejs') -%>

<div class='container-fluid pb-5 models'>
    <div class='container'>
        <div class='row'>
            <div class='col-12'>
                <h3 class="mb-0">Models</h3>
            </div>
            <% if(!models.length) { %>
                <div class="col-12 my-5">
                    <span class="d-block text-center">No any models for now. You can
                        <a href='/create' style="font-weight: 600; color: #4f5d75">create</a> and/or
                        <a href='/upload' style="font-weight: 600; color: #4f5d75">upload</a> some models.</span>
                </div>
            <% } else for(let i = 0; i < models.length; i++) { %>
            <div class='col-xs-12 col-md-4 mt-5'>
                <div class='info-card'>
                    <div class='img-block feature feature-1'
                         style="background: url(./img/3d.svg) no-repeat center center; background-size:128px; ">
                        <span class="float-left ml-2 mt-2"
                              style="line-height: 36px;
                              font-weight: 600;
                              color: #4f5d75; border-radius:.25rem;
                              padding: 0 10px;">29.99$</span>
                        <span class="float-right mt-2 mr-2">
                            <button
                                    style="color:#4f5d75!important"
                                    class="btn btn-secondary" onclick="add('<%= models[i].name %>')">Add to cart</button></span>
                    </div>
                    <p><%= models[i].name %><br/>
                        <a href="/model/<%= models[i].name%>" target="_blank" style="font-weight: 600">Click here to preview</a></p>
                </div>
            </div>
            <% } %>
        </div>
    </div>
</div>

<script type="text/javascript">
    const get = (field) => window.localStorage.getItem(field);
    const set = (field, value) => window.localStorage.setItem(field, value);
    if (!get('count')) set('count', '0');
    window.add = function (modelName) {
        const index = parseInt(get('count'));
        set(`model_${index}`, modelName);
        set('count', (index + 1).toString());
        alert('Model added to the cart');
    }
</script>

<%- include('parts/footer.ejs') -%>